import{d as F,r as p,p as g,o as l,w as a,b as n,e as t,l as r,c as m,q as y,t as s,L as f,M as k,m as G,F as j,K as E,y as M}from"./index-CNBZ1Xyr.js";const O={key:0},S={key:1},Z={key:2},$={key:0},J=F({__name:"PolicyDetailView",props:{data:{}},setup(X){const d=X;return(H,e)=>{const z=p("XBadge"),v=p("XAction"),b=p("KumaTargetRef"),h=p("XLayout"),D=p("XDl"),V=p("XAboutCard"),A=p("XActionGroup"),x=p("XDrawer"),R=p("RouterView"),L=p("DataCollection"),N=p("DataLoader"),B=p("XCard"),T=p("AppView"),K=p("RouteView");return l(),g(K,{name:"policy-detail-view",params:{page:1,size:Number,s:"",mesh:"",policy:"",policyPath:"",proxy:""}},{default:a(({route:i,t:u,uri:P,can:C,me:_})=>[n(T,null,{default:a(()=>[n(V,{title:u("policies.detail.about.title"),created:d.data.creationTime,modified:d.data.modificationTime,"data-testid":"policy-about-section"},{default:a(()=>[n(D,{variant:"x-stack"},{default:a(()=>[r("div",null,[r("dt",null,s(u("http.api.property.type")),1),e[0]||(e[0]=t()),r("dd",null,[n(z,{appearance:"decorative"},{default:a(()=>[t(s(d.data.type),1)]),_:1})])]),e[5]||(e[5]=t()),d.data.namespace.length>0?(l(),m("div",O,[r("dt",null,s(u("http.api.property.namespace")),1),e[1]||(e[1]=t()),r("dd",null,[n(z,{appearance:"decorative"},{default:a(()=>[t(s(d.data.namespace),1)]),_:1})])])):y("",!0),e[6]||(e[6]=t()),C("use zones")&&d.data.zone?(l(),m("div",S,[r("dt",null,s(u("http.api.property.zone")),1),e[2]||(e[2]=t()),r("dd",null,[n(v,{to:{name:"zone-cp-detail-view",params:{zone:d.data.zone}}},{default:a(()=>[n(z,{appearance:"decorative"},{default:a(()=>[t(s(d.data.zone),1)]),_:1})]),_:1},8,["to"])])])):y("",!0),e[7]||(e[7]=t()),d.data.spec?(l(),m("div",Z,[r("dt",null,s(u("http.api.property.targetRef")),1),e[3]||(e[3]=t()),r("dd",null,[n(b,{"target-ref":d.data.spec?.targetRef},null,8,["target-ref"])])])):y("",!0),e[8]||(e[8]=t()),(l(!0),m(f,null,k([Object.entries(d.data.labels)],c=>(l(),m(f,{key:typeof c},[c.length>0?(l(),m("div",$,[r("dt",null,s(u("policies.routes.item.labels")),1),e[4]||(e[4]=t()),r("dd",null,[n(h,{variant:"separated",truncate:""},{default:a(()=>[(l(),m(f,null,k([/^(.+\.)?kuma\.io\//],o=>(l(),m(f,{key:typeof o},[(l(!0),m(f,null,k(c,([w,q])=>(l(),g(z,{key:w,appearance:o.test(w)?"info":"decorative"},{default:a(()=>[t(s(w)+":"+s(q),1)]),_:2},1032,["appearance"]))),128))],64))),64))]),_:2},1024)])])):y("",!0)],64))),128))]),_:2},1024)]),_:2},1032,["title","created","modified"]),e[14]||(e[14]=t()),n(B,null,{title:a(()=>[r("h3",null,s(u("policies.detail.data-planes.title")),1)]),default:a(()=>[e[13]||(e[13]=t()),n(N,{src:P(G(j),"/meshes/:mesh/policy-path/:path/policy/:name/dataplanes",{mesh:i.params.mesh,path:i.params.policyPath,name:d.data.id},{page:i.params.page,size:i.params.size}),variant:"list"},{default:a(({data:c})=>[n(L,{type:"data-planes",items:c.items,page:i.params.page,"page-size":i.params.size,total:c.total,onChange:i.update},{default:a(()=>[n(E,{headers:[{..._.get("headers.name"),label:"Name",key:"name"},{..._.get("headers.namespace"),label:"Namespace",key:"namespace"},...C("use zones")?[{..._.get("headers.zone"),label:"Zone",key:"zone"}]:[],{..._.get("headers.actions"),label:"Actions",key:"actions",hideLabel:!0}],items:c.items,"is-selected-row":o=>o.id===i.params.proxy,onResize:_.set},{name:a(({row:o})=>[n(v,{"data-action":"",to:{name:"data-plane-detail-view",params:{proxy:o.id}}},{default:a(()=>[t(s(o.name),1)]),_:2},1032,["to"])]),namespace:a(({row:o})=>[t(s(o.namespace),1)]),zone:a(({row:o})=>[o.zone?(l(),g(v,{key:0,to:{name:"zone-cp-detail-view",params:{zone:o.zone}}},{default:a(()=>[t(s(o.zone),1)]),_:2},1032,["to"])):(l(),m(f,{key:1},[t(s(u("common.collection.none")),1)],64))]),actions:a(({row:o})=>[n(A,null,{default:a(()=>[n(v,{to:{name:"data-plane-detail-view",params:{proxy:o.id}}},{default:a(()=>[t(s(u("common.collection.actions.view")),1)]),_:2},1032,["to"])]),_:2},1024)]),_:2},1032,["headers","items","is-selected-row","onResize"]),e[12]||(e[12]=t()),n(R,null,{default:a(({Component:o})=>[i.child()?(l(),g(x,{key:0,onClose:w=>i.replace({params:{mesh:i.params.mesh},query:{page:i.params.page,size:i.params.size,s:i.params.s}})},{default:a(()=>[typeof c<"u"?(l(),g(M(o),{key:0,items:c.items},null,8,["items"])):y("",!0)]),_:2},1032,["onClose"])):y("",!0)]),_:2},1024)]),_:2},1032,["items","page","page-size","total","onChange"])]),_:2},1032,["src"])]),_:2},1024)]),_:2},1024)]),_:1})}}});export{J as default};
